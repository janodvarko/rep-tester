<html class="theme-light theme-firebug">
<head>
  <title>Reps Tester</title>
  <meta charset="utf-8"/>
  <script type="text/javascript" src="./node_modules/react/dist/react.js"></script>
  <script type="text/javascript" src="./node_modules/react-dom/dist/react-dom.js"></script>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <link rel="stylesheet" type="text/css" href="resource://devtools/client/shared/components/reps/reps.css">
  <link rel="stylesheet" type="text/css" href="resource://devtools/client/shared/components/tree/tree-view.css">
  <link rel="stylesheet" type="text/css" href="resource://devtools/client/themes/variables.css">
</head>
<body class="theme-body">
  <h1>Reps Tester</h1>
  <p>This tool is intended as simple <b>Reps</b> tester. It connects to the backend
  running in <i>this</i> browser. It attaches to the first tab running in this
  browser so, make sure this page is <i>not</i> the first tab otherwise it
  would attach to itself and cause the browser to freeze. This is known limitation
  and it'll be fixed later.</p>

  <h2>Connection</h2>
  <ol>
    <li>Run <code>listen 6080</code> command in the Developer Toolbar (Shift+F2).</li>
    <li>Start development server. Clone <code>https://github.com/jlongster/debugger.html.git</code>
  and start the server by executing <code>npm start</code> the root directory.</li>
    <li>Set <code>devtools.debugger.prompt-connection</code> to <code>false</code>
    (this is known limitation of <a href="https://github.com/jlongster/debugger.html/">debugger.html</a> project).</li>
  </ol>

  <p>
    Now, you can connect to the backend (do it after every page refresh)
    <br/>
    <button onclick="onConnect()">Connect</button>
    <span id="status"></button>
  </p>

  <h2>Evaluation</h2>
  <p>
    You can evaluate an expression within target page scope and see how
    the result (grip) looks like when rendered using reps (you might want to
    change the default mode):
    <br/>
    <span>Mode:</span>
    <select id="mode">
      <option>tiny</option>
      <option selected="true">short</option>
      <option>long</option>
      <option>&lt;default&gt;</option>
    </select>
    <br/>
    <textarea id="expression" cols="50" rows="3">[1,2,3,4]</textarea>
    <br/>
    <button onclick="onEvaluate()">Evaluate</button>
  </p>

  <p>
    As an alternative to live grip access, you might want to read
    a grip from an existing JSON string (you don't have to be connected
    to the backend in this case):
    <br/>
    <textarea id="mockedGrip" cols="50" rows="3"></textarea>
    <br/>
    <button onclick="onParse()">Parse</button>
    <div id="parseError"></div>
  </p>

  <br/>

  <p>
    And here is the result rendered using reps:
    <div id="result"></div>
  </p>

  <br/>

  <p>
    RDP grip packet:
    <div id="response"></div>
  </p>

  <p>
    JSON:
    <div id="json"></div>
  </p>
  <script src="bundle.js" type="text/javascript"></script>
</body>
</html>
